
-- Create allowed_students table
CREATE TABLE public.allowed_students (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  register_number text NOT NULL UNIQUE,
  name text NOT NULL,
  section text NOT NULL DEFAULT 'A'
);

ALTER TABLE public.allowed_students ENABLE ROW LEVEL SECURITY;

-- Anyone can read (needed for signup validation)
CREATE POLICY "Anyone can view allowed students"
  ON public.allowed_students FOR SELECT
  USING (true);

-- Insert Section A students (Supervisor: Mr.J.Raj Karkee)
INSERT INTO public.allowed_students (register_number, name, section) VALUES
('24AM0002', 'AAFREEN RIHANA SHEIK', 'A'),
('24AM0005', 'AJAI KUMAR S', 'A'),
('24AM0009', 'AMIZHTHAN I', 'A'),
('24AM0010', 'ANANTH R', 'A'),
('24AM0011', 'ANANYA I', 'A'),
('24AM0012', 'ANU KRINA SRIDHAR', 'A'),
('24AM0013', 'ARUL ARAVIND', 'A'),
('24AM0014', 'ARUN K', 'A'),
('24AM0017', 'B SANKARANARAYANAN', 'A'),
('24AM0018', 'B VAISHNAVI', 'A'),
('24AM0019', 'BHARATH B', 'A'),
('24AM0023', 'DEVAANAND R P', 'A'),
('24AM0025', 'DHAKSHAN L', 'A'),
('24AM0026', 'DHARUN R', 'A'),
('24AM0029', 'G B UVANTH RAJA', 'A'),
('24AM0032', 'GANESH S', 'A'),
('24AM0033', 'GAURI SUDHARSINI P', 'A'),
('24AM0035', 'GOKUL DAS G', 'A'),
('24AM0094', 'S JAYAVARSHINI', 'A'),
('24AM0040', 'HARISH M', 'A'),
('24AM0041', 'HEMALATHA S', 'A'),
('24AM0047', 'KANIKA M', 'A'),
('24AM0048', 'KAVIN KUMAR S', 'A'),
('24AM0050', 'KEVIN JOSHUA D', 'A'),
('24AM0053', 'M FAWZ HAAROON', 'A'),
('24AM0054', 'M G ANANYA', 'A'),
('24AM0055', 'M SRISHANTH MADHU', 'A'),
('24AM0056', 'M TEJESH', 'A'),
('24AM0057', 'MADHUMITHA S', 'A'),
('24AM0062', 'MOHAMED ZUHAIR S', 'A'),
('24AM0064', 'MOHAMMED SAHL BAIG', 'A'),
('24AM0065', 'MOHANARANGAN T R', 'A'),
('24AM0066', 'MOHITH V', 'A'),
('24AM0067', 'MONIKA K', 'A'),
('24AM0068', 'MRIDULLA S', 'A'),
('24AM0069', 'NAVEEN KUMAR G', 'A'),
('24AM0071', 'NIMALAN MANI M', 'A'),
('24AM0072', 'NIRANJANA SREE G', 'A'),
('24AM0076', 'PADMAVAIBHAV SENTHILKUMAR', 'A'),
('24AM0077', 'PARITCHITH VEMBEDU KIRUBAKARAN', 'A'),
('24AM0080', 'PRANATHEESH S', 'A'),
('24AM0081', 'PRASSANNA M', 'A'),
('24AM0082', 'R RAHUL', 'A'),
('24AM0084', 'RAGHUNATH S', 'A'),
('24AM0085', 'RAGUL H', 'A'),
('24AM0086', 'RAKSHANA P', 'A'),
('24AM0087', 'RAMKUMAR M', 'A'),
('24AM0088', 'RAVINDRAN S', 'A'),
('24AM0089', 'REVANTH AJOE A', 'A'),
('24AM0090', 'RITHIKA D S', 'A'),
('24AM0095', 'SAIKRISHIVGAR S', 'A'),
('24AM0104', 'SHALINI A', 'A'),
('24AM0106', 'SHEENA P', 'A'),
('24AM0110', 'SRINATH Y', 'A'),
('24AM0111', 'SRINIDHI N', 'A'),
('24AM0112', 'SUDHAGAR M', 'A'),
('24AM0115', 'THULASIRAM K', 'A'),
('24AM0120', 'VARSHINI R', 'A'),
('24AM0123', 'VIGNESHWARAN N L', 'A'),
('24AM0126', 'VIJEY ABINESSH K', 'A'),
('24AM0127', 'VIMAL M', 'A'),
('24AM0129', 'VISHAL N', 'A'),
('24AM0131', 'YUVANESH V', 'A'),
('24AM0133', 'YUVARRUNJITHA R S', 'A'),

-- Insert Section B students (Supervisor: Ms.Nagomiya)
('24AM0037', 'HAARISH RAJAN N', 'B'),
('24AM0001', 'A MUHAMMED FUZAIL', 'B'),
('24AM0003', 'ABISHEK K', 'B'),
('24AM0004', 'ABRAAR M', 'B'),
('24AM0006', 'AJAYTILAK V', 'B'),
('24AM0007', 'AKASH M G', 'B'),
('24AM0008', 'AKILESH C', 'B'),
('24AM0015', 'ASHWANTH BASKER', 'B'),
('24AM0016', 'ATISHRAJ B', 'B'),
('24AM0020', 'CHAYA NANDINI E', 'B'),
('24AM0021', 'D DEVANANDU', 'B'),
('24AM0022', 'DEEPAK S', 'B'),
('24AM0024', 'DEVENDRAN MURUGESAN', 'B'),
('24AM0028', 'DINESH KUMAR AS', 'B'),
('24AM0030', 'G SAMYUKTH', 'B'),
('24AM0034', 'GAYATHRI K', 'B'),
('24AM0036', 'GOKUL SRIDHARAN K S', 'B'),
('24AM0038', 'HARI RAGAV K S', 'B'),
('24AM0039', 'HARISH A', 'B'),
('24AM0043', 'INIYAN M J', 'B'),
('24AM0044', 'JEBASTIN NIVEAN J', 'B'),
('24AM0045', 'JEEVAN N N', 'B'),
('24AM0046', 'JEFFRYN ADAIKALA RAJ A', 'B'),
('24AM0049', 'KESAV P', 'B'),
('24AM0051', 'KHAVYA SHREE S', 'B'),
('24AM0052', 'KOUSIK R', 'B'),
('24AM0058', 'MITHRAN A', 'B'),
('24AM0059', 'MITHUN MITHRAN M', 'B'),
('24AM0061', 'MOHAMED SHAMEEL M', 'B'),
('24AM0063', 'STUDENT 24AM0063', 'B'),
('24AM0070', 'NIHAL AHMED H', 'B'),
('24AM0073', 'NISHITHA G', 'B'),
('24AM0074', 'P SUGANT KUMAR', 'B'),
('24AM0075', 'PADMAPRIYA B', 'B'),
('24AM0078', 'PARTHIBAN S', 'B'),
('24AM0079', 'PRAGYASREE K', 'B'),
('24AM0083', 'RAAJA KATHIR NILAVAN', 'B'),
('24AM0092', 'ROSHAN S', 'B'),
('24AM0093', 'S GOKULA KRISHNAN', 'B'),
('24AM0096', 'SAI SUNDAR J', 'B'),
('24AM0097', 'SAMRETHA S', 'B'),
('24AM0098', 'SANJANA C M', 'B'),
('24AM0099', 'SANJANA UMAPATHY', 'B'),
('24AM0100', 'SANJAY R', 'B'),
('24AM0101', 'SARATHY P', 'B'),
('24AM0102', 'SARIKHA K R', 'B'),
('24AM0103', 'SARVESH CHANDRAN ALIAS VIBU R', 'B'),
('24AM0105', 'SHARUNI S', 'B'),
('24AM0107', 'SHREYAS S', 'B'),
('24AM0108', 'SITTI JAIVARDHAN', 'B'),
('24AM0109', 'SIVARJUN ARAVIND', 'B'),
('24AM0113', 'TARUN S', 'B'),
('24AM0114', 'THIRUMURUGAN A', 'B'),
('24AM0117', 'TUSHAR MOHANTY', 'B'),
('24AM0118', 'VAMSI T U', 'B'),
('24AM0119', 'VARSHA S', 'B'),
('24AM0121', 'VARUN KUMARAN V', 'B'),
('24AM0122', 'VENKAT NARAYANAN M', 'B'),
('24AM0124', 'VIJAYA BAHSKAR K P', 'B'),
('24AM0125', 'VIJAYA SREERAM M', 'B'),
('24AM0128', 'VISHAAL R', 'B'),
('24AM0132', 'YUVANIKHA D', 'B'),
('24AM3001', 'GOKUL D', 'B'),
('24AM3002', 'LOYOLA MARSHEL M', 'B'),
('24AM3003', 'VINISH KUMAR MS', 'B');

-- Also make profiles readable by all authenticated users (needed for leaderboard)
CREATE POLICY "Authenticated users can view all profiles"
  ON public.profiles FOR SELECT TO authenticated
  USING (true);
